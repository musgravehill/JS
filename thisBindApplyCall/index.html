<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>JS</title>
    </head>
    <body> 
        <h1>this Bind Apply Call</h1>
        <script>
            /*
             function info() {
             console.log('getInfo: ', this);
             }
             
             let person = {
             name: 'Ivan',
             getInfo: info,
             getInfo2() {
             console.log('getInfo2 ', this.name);
             }
             };
             
             
             setTimeout(person.getInfo, 1000); //error, lost context 'this'
             setTimeout(() => person.getInfo(), 1000); //closure. Ok.  But return  John_Replacement
             
             setTimeout(person.getInfo2, 1000); //error, lost context 'this'
             setTimeout(() => person.getInfo2(), 1000); //closure. Ok. But return  John_Replacement
             
             person = {
             name: 'John_Replacement',
             getInfo: info,
             getInfo2() {
             console.log('getInfo2_Replacement ', this.name);
             }
             };
             */

            ///////////////////////////////
            /* const person = {
             name: 'JohnDou',
             getInfo() {
             console.log('gI: ', this.name);
             }
             };
             function timeoutFn() {
             this.getInfo();
             console.log('timeoutFn: ', this.name);
             }
             let timeoutFnVar = timeoutFn.bind(person);
             setTimeout(timeoutFnVar, 2000);
             */

            //////
            /*
             const user = {
             name: 'Ivan'
             };
             function getData(...someData) {
             console.log('getData:', this.name, someData);
             }
             function bindCustom(fn, context, ...args1) {
             let func = function (...args2) {
             fn.apply(context, args1.concat(args2)); //context, array of arguments
             };
             return func;
             }
             bindCustom(getData, user, 'someData0', 'someData1')();
             bindCustom(getData, user, 'someData0')('someData1');
             bindCustom(getData, user)('someData0', 'someData1');
             */

            /////
            /*
             let personInstruments = {
             getInfo: function (...someData) {
             console.log('getData:', this.name, someData);
             }
             };
             let user0 = {
             name: 'Ivan'
             };
             let fn0 = personInstruments.getInfo.bind(user0);
             fn0('somedata0');
             personInstruments.getInfo.call(user0, 'somedata0');
             personInstruments.getInfo.apply(user0, ['somedata0']);
             */
            ///////
            const myArr = [1, 2, 3, 4, 5];

            function multBy(arr, n) {
                return arr.map((i) => i * n)
            }
            console.log(multBy(myArr, 5));

            Array.prototype.multBy = function (n) {
                return this.map((i) => i * n);
            };
            Array.prototype.multBy = function (n) {
                return this.map((i) => i * 2 * n);
            };
            console.log(myArr.multBy(5));


        </script>
    </body>
</html>